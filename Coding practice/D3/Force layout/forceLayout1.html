<html>
<head>
	<title>Force layout test 1</title>
	<link rel="stylesheet" type="text/css" href="forceLayout.css"/> 
</head>
<body>
	<h1>A Basic Force Layout chart</h1>
	<p>Example of the simplest force layout chart. One hundred nodes with random values. Each node is a visualisation of an object shown below:</p>
	<pre class="prettyprint">
{
   size: 17.283,
   category1: 2,
   category2: 6
}
</pre>
	<p>In this example the node radius is "size" and the colour is "category1"</p>
	
	<div id="chartArea"></div>
	
	<p>Check out the source. Main code below.
	<pre class="prettyprint">
var forceLayouter = d3.layout.force()
                          .size([width, height])
                          .nodes(data)
                          .on("tick", forceTick);	
	
function forceTick(ev) {
  nodes
    .attr("cx", function(d) { return d.x; })
    .attr("cy", function(d) { return d.y; });
}
	</pre>
	<p>.size property required otherwise centers on [0,0]</p>
	
	<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
	<script src="../dist/d3.js" charset="utf-8"></script>
	<script>
		
		// Create a load of random data objects.
		var numDataPts = 100;
		var numCategory1s = 4;
		var numCategory2s = 6;
		
		var activeCategory = "category1";
		
		var data = [];
		for(var i = 0; i < numDataPts; i++) {
			data.push({ size: Math.random() * 20, category1: Math.floor(Math.random() * 4), category2:Math.floor(Math.random() * 4) });
		}
		
		
		var width = 400, height = 400;
		
		// create the container for the force layout chart
		var chart = d3.select("#chartArea").append("svg").attr("width", width).attr("height",height);
		
		// this scale is used to colour nodes by category.
		var colourRamp = d3.scale.category10();
		
		
		// create a force layouter 
		var forceLayouter = d3.layout.force().size([width, height]).nodes(data).on("tick", forceTick);
		
		
		// draw the nodes
		nodes = chart.selectAll(".nodes").data(data)
							.enter()
								.append("circle")
									.attr("class", "nodes")
									.attr("cx", function(d) { return d.x; })
									.attr("cy", function(d) { return d.y; })
									.attr("r", function(d) { return d.size; })
									.style("stroke", function(d) { return colourRamp(d[activeCategory])})
									.style("fill", function(d) { return colourRamp(d[activeCategory])});
									
									
		forceLayouter.start();
		
		
		// std d3 tick function copy and pasted from d3js.org
		function forceTick(ev) {
			 nodes.attr("cx", function(d) { return d.x; }).attr("cy", function(d) { return d.y; });
		}
		
		
	
	</script>
</body>	
</html>